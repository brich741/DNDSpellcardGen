



document.addEventListener('DOMContentLoaded', function () {
  fetchSpells();

});










function fetchSpells() {
  chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {
    console.log('Tabs queried:', tabs);  // Debugging line

    chrome.scripting.executeScript({
      target: { tabId: tabs[0].id },
      func: scrapeSpells
    }, (results) => {
      if (chrome.runtime.lastError) {
        console.error('Runtime error:', chrome.runtime.lastError.message);
        return;
      }
      console.log('Script executed, results:', results);  // Debugging line
      
      //take out all [1/2] and [2/2] etc and any apostrohes - this will strip out special chars and match 
      
      let spellarray = '[{"cardId":"cc2f62","name":"Acid Splash"},{"cardId":"c1e3aa","name":"Aid"},{"cardId":"ce3fda","name":"Alarm"},{"cardId":"c74b05","name":"Alter Self"},{"cardId":"c50e22","name":"Animal Friendship"},{"cardId":"cd9289","name":"Animal Messenger"},{"cardId":"c3f15c","name":"Animal Shapes"},{"cardId":"cc8ad3","name":"Animate Dead"},{"cardId":"c54fe4","name":"Animate Dead"},{"cardId":"c8c4cd","name":"Animate Objects"},{"cardId":"cf370e","name":"Antilife Shell"},{"cardId":"c44889","name":"Antimagic Field"},{"cardId":"cff7ab","name":"Antipathy/Sympathy"},{"cardId":"c6b480","name":"Antipathy/Sympathy"},{"cardId":"c9d9f3","name":"Arcane Eye"},{"cardId":"ca20e6","name":"Arcane Gate"},{"cardId":"cd1dab","name":"Arcane Lock"},{"cardId":"c99d06","name":"Arcane Vigor"},{"cardId":"cf0a0b","name":"Armor of Agathys"},{"cardId":"cb47fa","name":"Arms of Hadar"},{"cardId":"c1d5af","name":"Astral Projection"},{"cardId":"c9c1b5","name":"Augury"},{"cardId":"cb2b03","name":"Aura of Life"},{"cardId":"cdcaf4","name":"Aura of Purity"},{"cardId":"c92144","name":"Aura of Vitality"},{"cardId":"c9beee","name":"Awaken"},{"cardId":"c90b97","name":"Bane"},{"cardId":"c8d1c7","name":"Banishing Smite"},{"cardId":"cc0c68","name":"Banishment"},{"cardId":"cdc597","name":"Barkskin"},{"cardId":"cfc567","name":"Beacon of Hope"},{"cardId":"c38fa3","name":"Beast Sense"},{"cardId":"c50a1c","name":"Befuddlement"},{"cardId":"cc7b11","name":"Bestow Curse"},{"cardId":"c4655e","name":"Bigbys Hand"},{"cardId":"c69c6a","name":"Bigbys Hand"},{"cardId":"cedd87","name":"Blade Barrier"},{"cardId":"c9c9d6","name":"Blade Ward"},{"cardId":"caa9d4","name":"Bless"},{"cardId":"c6659a","name":"Blight"},{"cardId":"ca4212","name":"Blinding Smite"},{"cardId":"c43ec6","name":"Blindness/Deafness"},{"cardId":"c50107","name":"Blink"},{"cardId":"c5daa4","name":"Blur"},{"cardId":"ced149","name":"Burning Hands"},{"cardId":"c9043b","name":"Call Lightning"},{"cardId":"ce9e51","name":"Calm Emotions"},{"cardId":"cc8f5c","name":"Chain Lightning"},{"cardId":"c6d3a3","name":"Charm Monster"},{"cardId":"c593e2","name":"Charm Person"},{"cardId":"ca2cc8","name":"Chill Touch"},{"cardId":"c05313","name":"Chromatic Orb"},{"cardId":"cba1dd","name":"Circle of Death"},{"cardId":"cf6f94","name":"Circle of Power"},{"cardId":"c2b534","name":"Clairvoyance"},{"cardId":"c7e988","name":"Clone"},{"cardId":"c23cc4","name":"Cloudkill"},{"cardId":"c2f94a","name":"Cloud of Daggers"},{"cardId":"cc41ad","name":"Color Spray"},{"cardId":"c0f837","name":"Command"},{"cardId":"c82d11","name":"Commune"},{"cardId":"caac2b","name":"Commune with Nature"},{"cardId":"c29737","name":"Compelled Duel"},{"cardId":"c05842","name":"Comprehend Languages"},{"cardId":"c0b808","name":"Compulsion"},{"cardId":"c2d7d7","name":"Cone of Cold"},{"cardId":"c0e8b6","name":"Confusion"},{"cardId":"c454d5","name":"Conjure Animals"},{"cardId":"c438d7","name":"Conjure Barrage"},{"cardId":"c13cbc","name":"Conjure Celestial"},{"cardId":"c168e0","name":"Conjure Elemental"},{"cardId":"c47ddb","name":"Conjure Fey"},{"cardId":"c26db6","name":"Conjure Minor Elementals"},{"cardId":"c486a2","name":"Conjure Volley"},{"cardId":"c2d921","name":"Conjure Woodland Beings"},{"cardId":"c9d580","name":"Contact Other Plane"},{"cardId":"c5f7dc","name":"Contagion"},{"cardId":"c04404","name":"Contingency"},{"cardId":"c0d118","name":"Continual Flame"},{"cardId":"c22295","name":"Control Water"},{"cardId":"c81ad2","name":"Control Water"},{"cardId":"c04ecd","name":"Control Weather"},{"cardId":"c93f27","name":"Cordon of Arrows"},{"cardId":"cd2ef7","name":"Counterspell"},{"cardId":"c10451","name":"Create Food and Water"},{"cardId":"cbc71c","name":"Create or Destroy Water"},{"cardId":"c84293","name":"Create Undead"},{"cardId":"c6ba16","name":"Create Undead"},{"cardId":"cb3a8d","name":"Creation"},{"cardId":"c7b807","name":"Crown of Madness"},{"cardId":"cac5c9","name":"Crusaders Mantle"},{"cardId":"cd02df","name":"Cure Wounds"},{"cardId":"cbb0bf","name":"Dancing Lights"},{"cardId":"c8ece1","name":"Darkness"},{"cardId":"c5559d","name":"Darkvision"},{"cardId":"c1af3a","name":"Daylight"},{"cardId":"c7b420","name":"Death Ward"},{"cardId":"c8fe08","name":"Delayed Blast Fireball"},{"cardId":"cac5ec","name":"Delayed Blast Fireball"},{"cardId":"c984f8","name":"Demiplane"},{"cardId":"cf92e3","name":"Destructive Wave"},{"cardId":"c76829","name":"Detect Evil and Good"},{"cardId":"c254bb","name":"Detect Magic"},{"cardId":"ce403d","name":"Detect Poison and Disease"},{"cardId":"c49c37","name":"Detect Thoughts"},{"cardId":"c5ecde","name":"Detect Thoughts"},{"cardId":"c65797","name":"Dimension Door"},{"cardId":"cd171f","name":"Disguise Self"},{"cardId":"cb86fb","name":"Disintegrate"},{"cardId":"c9b9d2","name":"Dispel Evil and Good"},{"cardId":"cf252e","name":"Dispel Magic"},{"cardId":"cf9ac8","name":"Dissonant Whispers"},{"cardId":"c46394","name":"Divination"},{"cardId":"c5262b","name":"Divine Favor"},{"cardId":"cbee7a","name":"Divine Smite"},{"cardId":"c3193a","name":"Divine Word"},{"cardId":"c06c27","name":"Dominate Beast"},{"cardId":"c6ca8e","name":"Dominate Monster"},{"cardId":"cbe08c","name":"Dominate Person"},{"cardId":"c02629","name":"Dragons Breath"},{"cardId":"c0bb6e","name":"Drawmijs Instant Summons"},{"cardId":"c75f98","name":"Dream"},{"cardId":"c4e0d9","name":"Dream"},{"cardId":"c118cc","name":"Druidcraft"},{"cardId":"c3ff40","name":"Earthquake"},{"cardId":"cdfe19","name":"Earthquake"},{"cardId":"c6715a","name":"Eldritch Blast"},{"cardId":"ca31f7","name":"Elementalism"},{"cardId":"cb0b14","name":"Elemental Weapon"},{"cardId":"c235c7","name":"Enhance Ability"},{"cardId":"cae790","name":"Enlarge/Reduce"},{"cardId":"c3699e","name":"Enlarge/Reduce"},{"cardId":"c98f93","name":"Ensnaring Strike"},{"cardId":"c4685a","name":"Entangle"},{"cardId":"c8d987","name":"Enthrall"},{"cardId":"c3d633","name":"Etherealness"},{"cardId":"c96e8c","name":"Etherealness"},{"cardId":"c498a4","name":"Evards Black Tentacles"},{"cardId":"c79961","name":"Expeditious Retreat"},{"cardId":"c3ea41","name":"Eyebite"},{"cardId":"cece88","name":"Fabricate"},{"cardId":"c669b9","name":"Faerie Fire"},{"cardId":"c979ed","name":"False Life"},{"cardId":"c657b6","name":"Fear"},{"cardId":"c923fe","name":"Feather Fall"},{"cardId":"c07234","name":"Feign Death"},{"cardId":"cdc967","name":"Find Familiar"},{"cardId":"c09783","name":"Find Familiar"},{"cardId":"ce384a","name":"Find Steed"},{"cardId":"c129ad","name":"Find Steed"},{"cardId":"c4c1d3","name":"Find the Path"},{"cardId":"c9c04c","name":"Find Traps"},{"cardId":"c82636","name":"Finger of Death"},{"cardId":"c779e4","name":"Fireball"},{"cardId":"c3aa19","name":"Fire Bolt"},{"cardId":"cb2119","name":"Fire Shield"},{"cardId":"ca8084","name":"Fire Storm"},{"cardId":"c913bb","name":"Flame Blade"},{"cardId":"cad298","name":"Flame Strike"},{"cardId":"cfb056","name":"Flaming Sphere"},{"cardId":"c3d7dd","name":"Flesh to Stone"},{"cardId":"c671c8","name":"Fly"},{"cardId":"c2f4ed","name":"Fog Cloud"},{"cardId":"c6e92a","name":"Forbiddance"},{"cardId":"cd16e9","name":"Forbiddance"},{"cardId":"c5a0ca","name":"Forcecage"},{"cardId":"c8439c","name":"Forcecage"},{"cardId":"c833cb","name":"Foresight"},{"cardId":"ccf79f","name":"Fount of Moonlight"},{"cardId":"c7d5bb","name":"Freedom of Movement"},{"cardId":"cf5412","name":"Friends"},{"cardId":"ca1d06","name":"Gaseous Form"},{"cardId":"c5163d","name":"Gate"},{"cardId":"c9b2b7","name":"Gate"},{"cardId":"c2e8b5","name":"Geas"},{"cardId":"c142e7","name":"Gentle Repose"},{"cardId":"c50c28","name":"Giant Insect"},{"cardId":"c04faa","name":"Glibness"},{"cardId":"cf5d76","name":"Globe of Invulnerability"},{"cardId":"c7917d","name":"Glyph of Warding [1/3]"},{"cardId":"c46680","name":"Glyph of Warding [2/3]"},{"cardId":"cf3654","name":"Glyph of Warding [3/3]"},{"cardId":"cb13ed","name":"Goodberry"},{"cardId":"c41fa0","name":"Grasping Vine"},{"cardId":"c91fd6","name":"Grease"},{"cardId":"cde74d","name":"Greater Invisibility"},{"cardId":"c90591","name":"Greater Restoration"},{"cardId":"c18d13","name":"Guardian of Faith"},{"cardId":"cc9b5a","name":"Guards and Wards"},{"cardId":"c49497","name":"Guards and Wards"},{"cardId":"c02110","name":"Guidance"},{"cardId":"c35087","name":"Guiding Bolt"},{"cardId":"cb29ab","name":"Gust of Wind"},{"cardId":"ca2933","name":"Hail of Thorns"},{"cardId":"c78a81","name":"Hallow"},{"cardId":"c8a31f","name":"Hallow"},{"cardId":"c87dca","name":"Hallucinatory Terrain"},{"cardId":"c1e12f","name":"Harm"},{"cardId":"cc86a3","name":"Haste"},{"cardId":"cbce74","name":"Heal"},{"cardId":"ca1bb5","name":"Healing Word"},{"cardId":"c378fb","name":"Heat Metal"},{"cardId":"c852ad","name":"Hellish Rebuke"},{"cardId":"cce255","name":"Heroes Feast"},{"cardId":"cb98b3","name":"Heroism"},{"cardId":"c51328","name":"Hex"},{"cardId":"c10dac","name":"Hold Monster"},{"cardId":"cd24f0","name":"Hold Person"},{"cardId":"cd808c","name":"Holy Aura"},{"cardId":"c4917f","name":"Hunger of Hadar"},{"cardId":"cb74d1","name":"Hunters Mark"},{"cardId":"cffab7","name":"Hypnotic Pattern"},{"cardId":"c440a5","name":"Ice Knife"},{"cardId":"ca5af3","name":"Ice Storm"},{"cardId":"c160df","name":"Identify"},{"cardId":"cb4b83","name":"Illusory Script"},{"cardId":"cfd4fb","name":"Imprisonment"},{"cardId":"c449a3","name":"Imprisonment"},{"cardId":"c513ae","name":"Incendiary Cloud"},{"cardId":"c59b16","name":"Inflict Wounds"},{"cardId":"c06b6b","name":"Insect Plague"},{"cardId":"c336c3","name":"Invisibility"},{"cardId":"cee1b5","name":"Jallarzis Storm of Radiance"},{"cardId":"c81d8b","name":"Jump"},{"cardId":"c386d2","name":"Knock"},{"cardId":"c0bcba","name":"Legend Lore"},{"cardId":"cfc167","name":"Leomunds Secret Chest"},{"cardId":"c579c1","name":"Leomunds Tiny Hut"},{"cardId":"cbea6f","name":"Lesser Restoration"},{"cardId":"c95745","name":"Levitate"},{"cardId":"ce9734","name":"Light"},{"cardId":"c03d3a","name":"Lightning Arrow"},{"cardId":"cab9b4","name":"Lightning Bolt"},{"cardId":"c555ac","name":"Locate Animals or Plants"},{"cardId":"ccb140","name":"Locate Creature"},{"cardId":"cbb2f1","name":"Locate Object"},{"cardId":"c8f625","name":"Longstrider"},{"cardId":"cff537","name":"Mage Armor"},{"cardId":"ca02da","name":"Mage Hand"},{"cardId":"c1d2f6","name":"Magic Circle"},{"cardId":"ce78e7","name":"Magic Circle"},{"cardId":"cc8906","name":"Magic Jar"},{"cardId":"cd0c1b","name":"Magic Jar"},{"cardId":"cb194b","name":"Magic Missile"},{"cardId":"ce81f8","name":"Magic Mouth"},{"cardId":"cc2581","name":"Magic Mouth"},{"cardId":"c1a212","name":"Magic Weapon"},{"cardId":"c914be","name":"Major Image"},{"cardId":"c7a7e7","name":"Major Image"},{"cardId":"cb3e96","name":"Mass Cure Wounds"},{"cardId":"c4a9db","name":"Mass Heal"},{"cardId":"cde97a","name":"Mass Healing Word"},{"cardId":"c34f79","name":"Mass Suggestion"},{"cardId":"c82eaa","name":"Maze"},{"cardId":"cb9d53","name":"Meld into Stone"},{"cardId":"c12181","name":"Melfs Acid Arrow"},{"cardId":"cf6812","name":"Mending"},{"cardId":"c9b5fa","name":"Message"},{"cardId":"cf1071","name":"Meteor Swarm"},{"cardId":"c328a7","name":"Mind Blank"},{"cardId":"c1dc61","name":"Mind Sliver"},{"cardId":"c476cc","name":"Mind Spike"},{"cardId":"c8b7f0","name":"Minor Illusion"},{"cardId":"cbe839","name":"Minor Illusion"},{"cardId":"c728b1","name":"Mirage Arcane"},{"cardId":"cca161","name":"Mirror Image"},{"cardId":"c88cef","name":"Mislead"},{"cardId":"caa8a0","name":"Misty Step"},{"cardId":"cd47b7","name":"Modify Memory"},{"cardId":"c581e8","name":"Modify Memory"},{"cardId":"c4c3aa","name":"Moonbeam"},{"cardId":"c89e24","name":"Mordenkainens Faithful Hound"},{"cardId":"ca51aa","name":"Mordenkainens Magnificent Mansion"},{"cardId":"cabea9","name":"Mordenkainens Magnificent Mansion"},{"cardId":"ce0127","name":"Mordenkainens Private Sanctum"},{"cardId":"c2feb2","name":"Mordenkainens Sword"},{"cardId":"ce47ce","name":"Move Earth"},{"cardId":"ca6b3b","name":"Move Earth"},{"cardId":"ccf4d4","name":"Nondetection"},{"cardId":"c267f4","name":"Nystuls Magic Aura"},{"cardId":"cb2878","name":"Otilukes Freezing Sphere"},{"cardId":"ce0adc","name":"Otilukes Freezing Sphere"},{"cardId":"c4c15a","name":"Otilukes Resilient Sphere"},{"cardId":"ced6c5","name":"Ottos Irresistible Dance"},{"cardId":"c5a315","name":"Passwall"},{"cardId":"ca723c","name":"Pass without Trace"},{"cardId":"c09aff","name":"Phantasmal Force"},{"cardId":"c7948f","name":"Phantasmal Force"},{"cardId":"c4a126","name":"Phantasmal Killer"},{"cardId":"c80906","name":"Phantom Steed"},{"cardId":"c31b28","name":"Planar Ally"},{"cardId":"ccdc99","name":"Planar Ally"},{"cardId":"c3f937","name":"Planar Binding"},{"cardId":"cfff4e","name":"Planar Binding"},{"cardId":"cac4b6","name":"Plane Shift"},{"cardId":"ce1327","name":"Plant Growth"},{"cardId":"cd2895","name":"Poison Spray"},{"cardId":"c0162d","name":"Polymorph"},{"cardId":"c322e5","name":"Power Word Fortify"},{"cardId":"c136f0","name":"Power Word Heal"},{"cardId":"ce4db2","name":"Power Word Kill"},{"cardId":"c8ece0","name":"Power Word Stun"},{"cardId":"c33432","name":"Prayer of Healing"},{"cardId":"c61139","name":"Prestidigitation"},{"cardId":"c14a02","name":"Prismatic Spray"},{"cardId":"c88d79","name":"Prismatic Wall"},{"cardId":"cc2b43","name":"Prismatic Wall"},{"cardId":"c6a4c9","name":"Produce Flame"},{"cardId":"cf071e","name":"Programmed Illusion"},{"cardId":"cb28bb","name":"Programmed Illusion"},{"cardId":"cc8ec0","name":"Project Image"},{"cardId":"c3bf73","name":"Protection from Energy"},{"cardId":"cdbc3b","name":"Protection from Evil and Good"},{"cardId":"c95806","name":"Protection from Poison"},{"cardId":"c13799","name":"Purify Food and Drink"},{"cardId":"c55f19","name":"Raise Dead"},{"cardId":"c7e869","name":"Rarys Telepathic Bond"},{"cardId":"cad45f","name":"Ray of Enfeeblement"},{"cardId":"ce9e29","name":"Ray of Frost"},{"cardId":"cf7875","name":"Ray of Sickness"},{"cardId":"c9f929","name":"Regenerate"},{"cardId":"cb78d6","name":"Reincarnate"},{"cardId":"c40f1e","name":"Remove Curse"},{"cardId":"cd0906","name":"Resistance"},{"cardId":"c6758d","name":"Resurrection"},{"cardId":"cdd0ba","name":"Reverse Gravity"},{"cardId":"c09d9a","name":"Revivify"},{"cardId":"c8a686","name":"Rope Trick"},{"cardId":"cc7809","name":"Sacred Flame"},{"cardId":"cbf688","name":"Sanctuary"},{"cardId":"cf41af","name":"Scorching Ray"},{"cardId":"cc7c70","name":"Scrying"},{"cardId":"c47832","name":"Searing Smite"},{"cardId":"c8c665","name":"See Invisibility"},{"cardId":"c4e9b2","name":"Seeming"},{"cardId":"c12fd3","name":"Sending"},{"cardId":"ce9428","name":"Sequester"},{"cardId":"c10758","name":"Shapechange"},{"cardId":"c68644","name":"Shatter"},{"cardId":"c33595","name":"Shield"},{"cardId":"c6a4c8","name":"Shield of Faith"},{"cardId":"c3d9d7","name":"Shillelagh"},{"cardId":"cfac24","name":"Shining Smite"},{"cardId":"c6a210","name":"Shocking Grasp"},{"cardId":"cd5261","name":"Silence"},{"cardId":"c9a29c","name":"Silent Image"},{"cardId":"ca6f53","name":"Simulacrum"},{"cardId":"c25f2f","name":"Simulacrum"},{"cardId":"c09e91","name":"Sleep"},{"cardId":"c08669","name":"Sleet Storm"},{"cardId":"cbf93d","name":"Slow"},{"cardId":"ccd467","name":"Sorcerous Burst"},{"cardId":"c2e8b3","name":"Spare the Dying"},{"cardId":"c44e4c","name":"Speak with Animals"},{"cardId":"cb4773","name":"Speak with Dead"},{"cardId":"c5dd73","name":"Speak with Plants"},{"cardId":"c02f8b","name":"Spider Climb"},{"cardId":"ce9b2c","name":"Spike Growth"},{"cardId":"c86eab","name":"Spirit Guardians"},{"cardId":"c93a78","name":"Spiritual Weapon"},{"cardId":"cb5ada","name":"Staggering Smite"},{"cardId":"c91a62","name":"Starry Wisp"},{"cardId":"c50104","name":"Steel Wind Strike"},{"cardId":"c04485","name":"Stinking Cloud"},{"cardId":"c1feaf","name":"Stone Shape"},{"cardId":"c6e9e2","name":"Stoneskin"},{"cardId":"c62566","name":"Storm of Vengeance"},{"cardId":"c0b321","name":"Suggestion"},{"cardId":"c9a250","name":"Summon Aberration"},{"cardId":"cffded","name":"Summon Beast"},{"cardId":"c46d83","name":"Summon Celestial"},{"cardId":"c3f67a","name":"Summon Construct"},{"cardId":"c0d602","name":"Summon Dragon"},{"cardId":"cce485","name":"Summon Elemental"},{"cardId":"c12ab7","name":"Summon Fey"},{"cardId":"c41d1f","name":"Summon Fiend"},{"cardId":"ce0e39","name":"Summon Undead"},{"cardId":"c53fea","name":"Sunbeam"},{"cardId":"c41607","name":"Sunburst"},{"cardId":"c1ef16","name":"Swift Quiver"},{"cardId":"ca8aa8","name":"Symbol"},{"cardId":"cbd02d","name":"Synaptic Static"},{"cardId":"caabca","name":"Tashas Bubbling Cauldron"},{"cardId":"c89eb1","name":"Tashas Hideous Laughter"},{"cardId":"c3cb5d","name":"Telekinesis"},{"cardId":"c94d0d","name":"Telekinesis"},{"cardId":"cd7fb3","name":"Telepathy"},{"cardId":"c76c68","name":"Teleport"},{"cardId":"c7ff72","name":"Teleportation Circle"},{"cardId":"c9a898","name":"Teleportation Circle"},{"cardId":"cedb8b","name":"Tensers Floating Disk"},{"cardId":"c3e85b","name":"Thaumaturgy"},{"cardId":"cd99bc","name":"Thorn Whip"},{"cardId":"c39cd8","name":"Thunderclap"},{"cardId":"cfb531","name":"Thunderous Smite"},{"cardId":"cddeaa","name":"Thunderwave"},{"cardId":"c24fee","name":"Time Stop"},{"cardId":"c744de","name":"Toll the Dead"},{"cardId":"c26197","name":"Tongues"},{"cardId":"c1be0c","name":"Transport via Plants"},{"cardId":"c2c036","name":"Tree Stride"},{"cardId":"cf46d5","name":"True Polymorph"},{"cardId":"c2da54","name":"True Polymorph"},{"cardId":"cc2259","name":"True Resurrection"},{"cardId":"c889ad","name":"True Seeing"},{"cardId":"ca2272","name":"True Strike"},{"cardId":"cfdc2b","name":"Tsunami"},{"cardId":"c705f1","name":"Unseen Servant"},{"cardId":"c1b339","name":"Vampiric Touch"},{"cardId":"cd3bd0","name":"Vicious Mockery"},{"cardId":"c6935e","name":"Vitriolic Sphere"},{"cardId":"c8831a","name":"Wall of Fire"},{"cardId":"cf8b45","name":"Wall of Force"},{"cardId":"c101ef","name":"Wall of Ice"},{"cardId":"cb6a10","name":"Wall of Ice"},{"cardId":"c739a7","name":"Wall of Stone"},{"cardId":"ce3a66","name":"Wall of Stone"},{"cardId":"cb9366","name":"Wall of Thorns"},{"cardId":"c9e335","name":"Wall of Thorns"},{"cardId":"c92c48","name":"Warding Bond"},{"cardId":"c4e963","name":"Water Breathing"},{"cardId":"c0c616","name":"Web"},{"cardId":"c5c4e2","name":"Weird"},{"cardId":"cec3e6","name":"Wind Walk"},{"cardId":"cef07c","name":"Wind Wall"},{"cardId":"cc158b","name":"Wish"},{"cardId":"cd0387","name":"Wish"},{"cardId":"cf3d69","name":"Witch Bolt"},{"cardId":"c7676f","name":"Word of Radiance"},{"cardId":"c69f1a","name":"Word of Recall"},{"cardId":"c73854","name":"Wrathful Smite"},{"cardId":"c7f74e","name":"Yolandes Regal Presence"},{"cardId":"c1c78a","name":"Zone of Truth"}]';
      
      let spellJSON = JSON.parse(spellarray);
      
      
      
      let URLtoGo = "https://hardcodex.ru/2024/?cards=";
      const spells = results[0].result;
      const spellList = document.getElementById('spellList');
      console.log('Fetched spells:', spells);  // Debugging line
      spells.forEach(spell => {
   
        let result = spellJSON.filter(item => item.name === spell.replace(/[^a-zA-Z0-9\s]/g, ""));
    
        result.forEach(res => { URLtoGo = URLtoGo + res.cardId + ",";});
    
      });
      const li = document.createElement('li');
      li.textContent = URLtoGo;
      spellList.appendChild(li);
      document.getElementById("redirectButton").addEventListener("click", () => {chrome.tabs.create({ url: URLtoGo });}
  );

      
    });
  });
 
}

function scrapeSpells() {
  console.log('Scraping spells from webpage');  // Debugging line
  const spellElements = document.querySelectorAll('.styles_spellName__wX3ll');
  console.log('Found spell elements:', spellElements.length);  // Debugging line
  const spells = Array.from(spellElements).map(el => el.innerText);
  console.log('Extracted spells:', spells);  // Debugging line

  return spells;
}
